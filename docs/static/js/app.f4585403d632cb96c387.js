webpackJsonp([1],{IVvP:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n=i("c/Tr"),r=i.n(n),o=i("woOf"),a=i.n(o),c=i("BO1k"),l=i.n(c),u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icons"},[e("symbol",{attrs:{id:"icon-fire",viewBox:"0 0 24 24"}},[e("title",[this._v("fire")]),this._v(" "),e("path",{attrs:{d:"M11.719 18.984c2.672 0 4.781-2.109 4.781-4.781 0-1.406-0.188-2.719-0.563-4.031-1.031 1.359-2.859 2.203-4.641 2.578s-2.813 1.453-2.813 3.094c0 1.734 1.453 3.141 3.234 3.141zM13.5 0.656c3.891 3.141 6.516 7.969 6.516 13.359 0 4.406-3.609 7.969-8.016 7.969s-8.016-3.563-8.016-7.969c0-3.375 1.219-6.516 3.234-8.906v0.375c0 2.063 1.547 3.703 3.609 3.703s3.422-1.641 3.422-3.703c0-2.156-0.75-4.828-0.75-4.828z"}})]),this._v(" "),e("symbol",{attrs:{id:"icon-water",viewBox:"0 0 32 32"}},[e("title",[this._v("water")]),this._v(" "),e("path",{attrs:{d:"M27.020 14.786c-2.055-5.732-6.41-10.88-11.020-14.786-4.61 3.907-8.965 9.054-11.020 14.786-1.271 3.545-1.396 7.393 0.393 10.794 2.058 3.911 6.207 6.42 10.626 6.42s8.569-2.509 10.626-6.42c1.79-3.401 1.664-7.249 0.393-10.794zM23.086 23.717c-1.369 2.602-4.15 4.283-7.086 4.283-1.723 0-3.391-0.579-4.753-1.583 0.414 0.054 0.832 0.083 1.254 0.083 3.67 0 7.146-2.1 8.856-5.351 1.402-2.665 1.281-5.433 0.746-7.636 0.455 0.88 0.841 1.756 1.151 2.623 0.706 1.971 1.251 4.886-0.168 7.581z"}})])])},staticRenderFns:[]};var h=i("VU/8")({name:"icons"},u,!1,function(t){i("IVvP")},"data-v-27cb3cce",null).exports,f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{staticClass:"totem",attrs:{transform:t.transform},on:{click:t.toggle}},[i("rect",{staticClass:"totem",attrs:{width:t.size,height:t.size,x:0,y:0}}),t._v(" "),i("svg",{staticClass:"icon",class:t.iconClass,attrs:{width:t.size*t.scale,height:t.size*t.scale,x:t.size*t.offset,y:t.size*t.offset}},[i("use",{attrs:{"xlink:href":t.icon}})])])},staticRenderFns:[]};var d=i("VU/8")({name:"totem",props:{totem:{},size:0,editing:!1},data:function(){return{}},computed:{x:function(){return this.totem.col*this.size},y:function(){return this.totem.row*this.size},out:function(){return this.totem.off?"water":"fire"},icon:function(){return this.totem.off?"#icon-water":"#icon-fire"},transform:function(){return"translate("+this.x+", "+this.y+")"},scale:function(){return this.totem.off?.8*.9:.8},offset:function(){return(1-this.scale)/2},hint:function(){return(this.totem.hint&&!this.clicked||!1===this.totem.hint&&this.clicked)&&!this.editing?"hint":""},clicked:function(){return this.totem.clicked},iconClass:function(){return this.out+" "+this.hint}},methods:{toggle:function(){this.$emit("toggle",this.totem)}}},f,!1,function(t){i("dBTr")},"data-v-8d785518",null).exports,m=(i("mvHQ"),function(t,e,i){var s=[];switch(t%e){case 0:s=[t-e,t,t+1,t+e];break;case e-1:s=[t-e,t-1,t,t+e];break;default:s=[t-e,t-1,t,t+1,t+e]}return s.filter(function(t){return t>=0&&t<i*e})}),v=i("mMX9"),g=i.n(v),p={name:"lava",components:{totem:d,icons:h},data:function(){return{row:5,col:5,width:300,height:300,totems:{},editing:!1,showHint:!1,result:[],prevState:"",prevHintIndex:0}},computed:{totemSize:function(){return Math.min(this.width/this.colNum,this.height/this.rowNum)},status:function(){var t=[];for(var e in this.totems){var i=this.totems[e];t[i.row*this.colNum+i.col]=i.off?0:1}return t},state:function(){return this.status.reduce(function(t,e){return t+e},"")},weight:function(){return this.status.length>0?this.status.reduce(function(t,e){return t+e},0):42},colNum:function(){return~~this.col},rowNum:function(){return~~this.row},hintText:function(){var t=this.result.length;return"Hint"+(t>0?" "+(this.prevHintIndex%t+1)+"/"+t:"")}},created:function(){window.addEventListener("resize",this.resize);var t=new g.a;t.addEventListener("message",this.handleWorkerCallback),this.worker=t},watch:{col:function(){this.createTotems()},row:function(){this.createTotems()},weight:function(){this.editing||0!==this.weight||this.done()},editing:function(){this.isPlayable()}},mounted:function(){var t=this;this.$nextTick(function(){t.resize(),t.init()})},methods:{init:function(){this.createTotems()},resize:function(){this.width=window.innerWidth-32,this.height=window.innerHeight-34-48-28-16},createTotems:function(){for(var t={},e=0;e<this.rowNum;e++)for(var i=0;i<this.colNum;i++){var s=e*this.colNum+i;t[s]={row:e,col:i,off:!1,clicked:!1,hint:!1,neighbors:m(s,this.colNum,this.rowNum)}}this.totems=t},reset:function(){for(var t in this.totems){var e=this.totems[t];e.off&&(e.off=!1)}},toggleTotem:function(t){this.audioPlay(t.off);var e=t.row*this.colNum+t.col,i={};if(this.editing)i[e]=a()({},this.totems[e],{off:!this.totems[e].off});else{var s=this.totems[e].neighbors,n=!0,r=!1,o=void 0;try{for(var c,u=l()(s);!(n=(c=u.next()).done);n=!0){var h=c.value;i[h]=a()({},this.totems[h],{off:!this.totems[h].off})}}catch(t){r=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}}i[e]=a()({},i[e],{clicked:!this.totems[e].clicked}),this.totems=a()({},this.totems,i)},done:function(){var t=this;this.$refs.success.play(),setTimeout(function(){t.result=[],t.nextBlock(),t.clearHint()},500)},hint:function(){var t=void 0;if(this.prevState===this.state){this.prevHintIndex=this.prevHintIndex+1;var e=this.prevHintIndex%this.result.length;t=this.result[e],this.updateHint(t)}else this.prevState=this.state,this.prevHintIndex=0,this.worker.postMessage({state:this.state,rowNum:this.rowNum,colNum:this.colNum,type:"hint"})},handleHint:function(t){t=this.sortByWeight(t),this.result=t;var e=t[0];e?this.updateHint(e):console.error("No solution!")},handlePlay:function(t){0===t.length&&(alert("No solutions!"),this.editing=!0),this.prevState!==this.state&&this.clearHint()},handleWorkerCallback:function(t){var e=t.data,i=e.result;("play"===e.type?this.handlePlay:this.handleHint)(i)},updateHint:function(t){var e=this,i={};r()(t).forEach(function(t,s){i[s]=a()({},e.totems[s],{hint:"1"===t,clicked:!1})}),this.totems=a()({},this.totems,i)},clearHint:function(){for(var t in this.totems)this.totems[t].hint=!1,this.totems[t].clicked=!1;this.result=[]},sortByWeight:function(t){return t.sort(function(t,e){var i=t.replace(/0/g,""),s=e.replace(/0/g,"");return i.length<s.length})},nextBlock:function(){this.row=1+~~this.row,this.col=1+~~this.col},isPlayable:function(){this.editing||this.worker.postMessage({state:this.state,rowNum:this.rowNum,colNum:this.colNum,type:"play"})},audioPlay:function(t){if(t){var e=this.$refs.fire;e.currentTime=0,e.play()}else{var i=this.$refs.water;i.currentTime=0,i.play()}}},beforeDestroy:function(){window.removeEventListener("resize",this.resize)}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lava"},[i("h2",{staticClass:"lava-title fire"},[t._v("Lava Foundation")]),t._v(" "),i("div",{staticClass:"actions",style:{width:t.totemSize*t.col+"px"}},[i("label",{staticClass:"label edit",class:t.editing?"bg-fire":"bg-water",attrs:{for:"edit"}},[t._v("\n      "+t._s(t.editing?"Editing":"Playing")+"\n      "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editing,expression:"editing"}],staticClass:"input",attrs:{id:"edit",type:"checkbox"},domProps:{checked:Array.isArray(t.editing)?t._i(t.editing,null)>-1:t.editing},on:{change:function(e){var i=t.editing,s=e.target,n=!!s.checked;if(Array.isArray(i)){var r=t._i(i,null);s.checked?r<0&&(t.editing=i.concat([null])):r>-1&&(t.editing=i.slice(0,r).concat(i.slice(r+1)))}else t.editing=n}}})]),t._v(" "),t.editing?[i("label",{staticClass:"label row",attrs:{for:"row"}},[t._v("\n        Row:\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.row,expression:"row"}],staticClass:"input",attrs:{id:"row",type:"number",min:"1",max:"1000"},domProps:{value:t.row},on:{input:function(e){e.target.composing||(t.row=e.target.value)}}})]),t._v(" "),i("label",{staticClass:"label col",attrs:{for:"col"}},[t._v("\n        Col:\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.col,expression:"col"}],staticClass:"input",attrs:{id:"col",type:"number",min:"1",max:"1000"},domProps:{value:t.col},on:{input:function(e){e.target.composing||(t.col=e.target.value)}}})])]:t._e(),t._v(" "),t.editing?i("button",{staticClass:"reset bg-water",on:{click:t.reset}},[t._v("Reset")]):i("button",{staticClass:"hint bg-water",on:{click:t.hint}},[t._v(t._s(t.hintText))])],2),t._v(" "),i("div",{staticClass:"azeroth"},[i("icons"),t._v(" "),i("svg",{ref:"board",staticClass:"maelstrom",attrs:{width:t.totemSize*t.col,height:t.totemSize*t.row},on:{contextmenu:function(t){t.preventDefault()}}},t._l(t.totems,function(e,s){return i("totem",{key:s,attrs:{totem:e,size:t.totemSize,editing:t.editing},on:{toggle:t.toggleTotem}})}),1)],1),t._v(" "),i("div",{staticClass:"audio"},[i("audio",{ref:"water",attrs:{src:"./static/water.wav"}}),t._v(" "),i("audio",{ref:"fire",attrs:{src:"./static/fire.wav"}}),t._v(" "),i("audio",{ref:"success",attrs:{src:"./static/success.wav"}})])])},staticRenderFns:[]};var y={name:"app",components:{Lava:i("VU/8")(p,w,!1,function(t){i("alJn")},"data-v-bc45d1da",null).exports}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Lava")],1)},staticRenderFns:[]};var b=i("VU/8")(y,_,!1,function(t){i("Ortb")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",template:"<App/>",components:{App:b}})},Ortb:function(t,e){},alJn:function(t,e){},dBTr:function(t,e){},mMX9:function(t,e,i){t.exports=function(){return new Worker(i.p+"67df0efba89e1821577c.worker.js")}}},["NHnr"]);
//# sourceMappingURL=app.f4585403d632cb96c387.js.map